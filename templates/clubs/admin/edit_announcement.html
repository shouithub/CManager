{% extends 'clubs/base.html' %}

{% block title %}ç¼–è¾‘å…¬å‘Š - CManager{% endblock %}

{% block content %}
<div class="container">
    <div class="page-header">
        <h1>ğŸ“ ç¼–è¾‘å…¬å‘Š</h1>
    </div>
    
    {% if messages %}
    <div class="messages">
        {% for message in messages %}
        <div class="message {{ message.tags }}">{{ message }}</div>
        {% endfor %}
    </div>
    {% endif %}
    
    {% if errors %}
    <div class="error-list">
        {% for error in errors %}
        <div class="message error">{{ error }}</div>
        {% endfor %}
    </div>
    {% endif %}
    
    <div class="card">
        <form method="post" enctype="multipart/form-data">
            {% csrf_token %}
            
            <div class="form-group">
                <label for="title">å…¬å‘Šæ ‡é¢˜ <span class="required">*</span></label>
                <input 
                    type="text" 
                    id="title" 
                    name="title" 
                    required 
                    maxlength="200"
                    placeholder="è¾“å…¥å…¬å‘Šæ ‡é¢˜"
                    value="{{ announcement.title }}"
                >
            </div>
            
            <div class="form-group">
                <label for="content">å…¬å‘Šå†…å®¹ <span class="required">*</span></label>
                <textarea 
                    id="content" 
                    name="content" 
                    required 
                    rows="8"
                    placeholder="è¾“å…¥å…¬å‘Šå†…å®¹"
                >{{ announcement.content }}</textarea>
            </div>
            
            <div class="form-group">
                <label for="expires_at">å¤±æ•ˆæ—¶é—´ï¼ˆå¯é€‰ï¼‰</label>
                <input 
                    type="datetime-local" 
                    id="expires_at" 
                    name="expires_at"
                    {% if announcement.expires_at %}
                    value="{{ announcement.expires_at|date:'Y-m-d\TH:i' }}"
                    {% endif %}
                >
                <small>å…¬å‘Šå°†åœ¨æŒ‡å®šæ—¶é—´åè‡ªåŠ¨å½’æ¡£ã€‚å¦‚ä¸å¡«å†™ï¼Œå…¬å‘Šå°†ä¸€ç›´æœ‰æ•ˆã€‚</small>
            </div>
            
            <div class="form-group">
                <label for="attachment">é™„ä»¶ï¼ˆå¯é€‰ï¼‰</label>
                <input 
                    type="file" 
                    id="attachment" 
                    name="attachment"
                >
                <small>æ”¯æŒä¸Šä¼ å„ç§ç±»å‹çš„æ–‡ä»¶ï¼Œå¦‚æ–‡æ¡£ã€å›¾ç‰‡ç­‰ã€‚</small>
                {% if announcement.attachment %}
                <p class="mt-1">å½“å‰é™„ä»¶ï¼š<a href="{{ announcement.attachment.url }}">{{ announcement.attachment.name }}</a></p>
                {% endif %}
            </div>
            
            <div class="form-group">
                <label for="status">å‘å¸ƒçŠ¶æ€ <span class="required">*</span></label>
                <select id="status" name="status" required>
                    <option value="draft" {% if announcement.status == 'draft' %}selected{% endif %}>ğŸ“ è‰ç¨¿ï¼ˆä¿å­˜ä½†ä¸æ˜¾ç¤ºï¼‰</option>
                    <option value="published" {% if announcement.status == 'published' %}selected{% endif %}>âœ“ å‘å¸ƒï¼ˆç«‹å³æ˜¾ç¤ºåœ¨é¦–é¡µï¼‰</option>
                    <option value="archived" {% if announcement.status == 'archived' %}selected{% endif %}>ğŸ“ å½’æ¡£ï¼ˆä¸å†æ˜¾ç¤ºåœ¨é¦–é¡µï¼‰</option>
                </select>
            </div>
            
            <div class="form-actions">
                <button type="submit" name="action" value="update" class="btn btn-success">
                    ğŸ’¾ ä¿å­˜ä¿®æ”¹
                </button>
                <a href="{% url 'clubs:admin_dashboard' %}" class="btn btn-secondary">
                    å–æ¶ˆ
                </a>
            </div>
        </form>
    </div>
</div>
{% endblock %}