{% extends 'clubs/admin/base.html' %}

{% block title %}被锁定账号管理{% endblock %}

{% block content %}
<h1>被锁定账号</h1>
{% if locked %}
<table class="table">
    <thead>
        <tr><th>用户名</th><th>邮箱</th><th>操作</th></tr>
    </thead>
    <tbody>
        {% for u in locked %}
        <tr>
            <td>
                <a href="{% url 'clubs:user_detail' u.id %}" style="text-decoration: none; color: inherit; display: flex; align-items: center; gap: 8px;">
                    <div style="width: 32px; height: 32px; border-radius: 50%; overflow: hidden; flex-shrink: 0;">
                        {% if u.profile.avatar %}
                            <img src="{{ u.profile.avatar.url }}" alt="{{ u.username }}" style="width: 100%; height: 100%; object-fit: cover;">
                        {% else %}
                            <div style="width: 100%; height: 100%; background: var(--md3-primary-container); color: var(--md3-on-primary-container); display: flex; align-items: center; justify-content: center; font-weight: bold; font-size: 14px;">
                                {{ u.profile.get_full_name|slice:":1"|default:u.username|slice:":1"|upper }}
                            </div>
                        {% endif %}
                    </div>
                    <span>{{ u.username }}</span>
                </a>
            </td>
            <td>{{ u.email }}</td>
            <td>
                <form method="post" action="{% url 'clubs:unlock_account' u.username %}" style="display:inline">{% csrf_token %}
                    <button class="btn">解锁</button>
                </form>
            </td>
        </tr>
        {% endfor %}
    </tbody>
</table>
{% else %}
<p>当前没有被锁定的账号。</p>
{% endif %}
{% endblock %}