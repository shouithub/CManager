{% extends 'clubs/base.html' %}

{% block title %}ä¿®æ”¹ç”¨æˆ·è§’è‰² - CManager{% endblock %}

{% block content %}
<div class="container">
    <div class="page-header">
        <h1>ğŸ”§ ä¿®æ”¹ç”¨æˆ·è§’è‰²</h1>
    </div>
    
    {% if messages %}
    <div class="messages">
        {% for message in messages %}
        <div class="message {{ message.tags }}">{{ message }}</div>
        {% endfor %}
    </div>
    {% endif %}
    
    {% if errors %}
    <div class="error-list">
        {% for error in errors %}
        <div class="message error">{{ error }}</div>
        {% endfor %}
    </div>
    {% endif %}
    
    <div class="card">
        <!-- ç”¨æˆ·ä¿¡æ¯å¡ç‰‡ -->
        <div class="user-info-card" style="margin-bottom: 2rem;">
            <div style="display: flex; align-items: center; gap: 1rem;">
                <div style="font-size: 2rem;"><span class="material-icons" style="font-size: 2rem;">person</span></div>
                <div>
                    <div class="label">ç”¨æˆ·å</div>
                    <div style="font-size: 1.3rem; font-weight: bold;">{{ user.username }}</div>
                    <div class="label" style="margin-top: 0.5rem;">é‚®ç®±</div>
                    <div style="color: #666;">{{ user.email }}</div>
                </div>
            </div>
        </div>
        
        <!-- è§’è‰²ä¿®æ”¹è¡¨å• -->
        <form method="post">
            {% csrf_token %}
            
            <div class="form-group">
                <label>å½“å‰è§’è‰²</label>
                <div style="padding: 0.75rem; background: #f5f5f5; border-radius: 0.25rem; margin-bottom: 1rem;">
                    {% if profile %}
                        {% if profile.role == 'president' %}
                            <span class="role-badge president">ç¤¾é•¿ (President)</span>
                        {% elif profile.role == 'staff' %}
                            <span class="role-badge staff">å¹²äº‹ (Staff)</span>
                        {% elif profile.role == 'admin' %}
                            <span class="role-badge admin">ç®¡ç†å‘˜ (Admin)</span>
                        {% else %}
                            <span class="role-badge unknown">æœªè®¾å®š</span>
                        {% endif %}
                    {% else %}
                        <span class="role-badge unknown">æœªè®¾å®š</span>
                    {% endif %}
                </div>
            </div>
            
            <div class="form-group">
                <label for="role">ä¿®æ”¹ä¸ºæ–°è§’è‰² <span class="required">*</span></label>
                <select id="role" name="new_role" required>
                    <option value="">-- è¯·é€‰æ‹© --</option>
                    <option value="president">
                        ç¤¾é•¿ (President) - å¯ä»¥åˆ›å»ºç¤¾å›¢ã€æäº¤ææ–™
                    </option>
                    <option value="staff">
                        å¹²äº‹ (Staff) - å¯ä»¥å®¡æ ¸ææ–™ã€ä¸Šä¼ æ¨¡æ¿
                    </option>
                    <option value="admin">
                        ç®¡ç†å‘˜ (Admin) - æ‹¥æœ‰å…¨éƒ¨æƒé™
                    </option>
                </select>
            </div>
            
            <div class="form-group">
                <label for="reason">ä¿®æ”¹åŸå› ï¼ˆå¯é€‰ï¼‰</label>
                <textarea 
                    id="reason" 
                    name="reason" 
                    rows="3"
                    placeholder="è¾“å…¥ä¿®æ”¹æ­¤ç”¨æˆ·è§’è‰²çš„åŸå› ï¼ˆç”¨äºè®°å½•ï¼‰"
                ></textarea>
            </div>
            
            <!-- è§’è‰²è¯´æ˜ -->
            <div class="role-info">
                <h4>è§’è‰²æƒé™è¯´æ˜</h4>
                <div class="role-description">
                    <div class="role-item">
                        <h5>ğŸ‘‘ ç¤¾é•¿ (President)</h5>
                        <ul>
                            <li>åˆ›å»ºå¹¶ç®¡ç†ç¤¾å›¢</li>
                            <li>æäº¤å¹´å®¡ææ–™</li>
                            <li>æäº¤æŠ¥é”€ç”³è¯·</li>
                            <li>ç”³è¯·ç¤¾é•¿å˜æ›´</li>
                            <li>æŸ¥çœ‹ç”³è¯·çŠ¶æ€å’Œæ‹’ç»åŸå› </li>
                        </ul>
                    </div>
                    <div class="role-item">
                        <h5>ğŸ”¨ å¹²äº‹ (Staff)</h5>
                        <ul>
                            <li>å®¡æ ¸ç¤¾å›¢æ³¨å†Œç”³è¯·</li>
                            <li>å®¡æ ¸å¹´å®¡ææ–™</li>
                            <li>å®¡æ ¸æŠ¥é”€ç”³è¯·</li>
                            <li>å®¡æ ¸ç¤¾é•¿å˜æ›´ç”³è¯·</li>
                            <li>ä¸Šä¼ ææ–™æ¨¡æ¿</li>
                        </ul>
                    </div>
                    <div class="role-item">
                        <h5>ğŸ›¡ï¸ ç®¡ç†å‘˜ (Admin)</h5>
                        <ul>
                            <li>æ‹¥æœ‰å¹²äº‹çš„æ‰€æœ‰æƒé™</li>
                            <li>ç®¡ç†ç”¨æˆ·å’Œä¿®æ”¹ç”¨æˆ·è§’è‰²</li>
                            <li>å‘å¸ƒç³»ç»Ÿå…¬å‘Š</li>
                            <li>æŸ¥çœ‹ç³»ç»Ÿç»Ÿè®¡æ•°æ®</li>
                        </ul>
                    </div>
                </div>
            </div>
            
            <div class="form-actions">
                <button type="submit" class="btn btn-warning">
                    âš ï¸ ç¡®è®¤ä¿®æ”¹è§’è‰²
                </button>
                <a href="{% url 'clubs:manage_users' %}" class="btn btn-secondary">
                    å–æ¶ˆ
                </a>
            </div>
        </form>
    </div>
</div>

<style>
.required {
    color: #d9534f;
}

.user-info-card {
    padding: 1.5rem;
    background: #f9f9f9;
    border-left: 4px solid #0066cc;
    border-radius: 0.25rem;
}

.user-info-card .label {
    font-size: 0.85rem;
    color: #999;
    font-weight: 600;
    text-transform: uppercase;
}

.role-badge {
    display: inline-block;
    padding: 0.35rem 0.75rem;
    border-radius: 1rem;
    font-size: 0.85rem;
    font-weight: 600;
}

.role-badge.president {
    background: #e3f2fd;
    color: #0066cc;
}

.role-badge.staff {
    background: #e8f5e9;
    color: #009933;
}

.role-badge.admin {
    background: #fff3e0;
    color: #ff6600;
}

.role-badge.unknown {
    background: #f0f0f0;
    color: #666;
}

.role-info {
    margin: 2rem 0;
    padding: 1rem;
    background: #f5f5f5;
    border-radius: 0.25rem;
}

.role-info h4 {
    margin-bottom: 1rem;
    color: #333;
}

.role-description {
    display: grid;
    grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
    gap: 1rem;
}

.role-item {
    background: white;
    padding: 1rem;
    border-radius: 0.25rem;
    border-left: 4px solid #ddd;
}

.role-item h5 {
    margin-top: 0;
    margin-bottom: 0.5rem;
    color: #333;
}

.role-item ul {
    margin: 0;
    padding-left: 1.25rem;
}

.role-item li {
    margin: 0.3rem 0;
    color: #666;
    font-size: 0.9rem;
}

.form-actions {
    display: flex;
    gap: 1rem;
    margin-top: 2rem;
}

.form-actions .btn {
    padding: 0.75rem 1.5rem;
}

.btn-warning {
    background: #f0ad4e;
    color: white;
    border: none;
    padding: 0.75rem 1.5rem;
    border-radius: 0.25rem;
    cursor: pointer;
    text-decoration: none;
    display: inline-block;
}

.btn-warning:hover {
    background: #ec971f;
}

@media (max-width: 768px) {
    .role-description {
        grid-template-columns: 1fr;
    }
    
    .user-info-card {
        flex-direction: column;
    }
}
</style>
{% endblock %}
