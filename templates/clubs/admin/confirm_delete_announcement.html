{% extends 'clubs/base.html' %}

{% block title %}åˆ é™¤å…¬å‘Š{% endblock %}

{% block content %}
<div style="max-width: 600px; margin: 3rem auto; padding: 20px;">
    <div class="card">
        <div class="card-header">
            <h2 style="margin: 0;">âš ï¸ åˆ é™¤å…¬å‘Šç¡®è®¤</h2>
        </div>
        
        <div style="padding: 30px;">
            <div style="background: #fff3cd; border-left: 4px solid #ffc107; padding: 15px; border-radius: 4px; margin-bottom: 20px;">
                <p style="margin: 0; color: #856404;">
                    <strong>âš ï¸ è­¦å‘Š:</strong> æ­¤æ“ä½œä¸å¯æ’¤é”€ï¼Œå…¬å‘Šåˆ é™¤åæ— æ³•æ¢å¤ã€‚
                </p>
            </div>

            <div style="background: #f9f9f9; padding: 20px; border-radius: 4px; margin-bottom: 20px; border: 1px solid #ddd;">
                <div style="margin-bottom: 15px;">
                    <div style="color: #999; font-size: 0.9rem; margin-bottom: 5px;">å…¬å‘Šæ ‡é¢˜</div>
                    <div style="font-weight: bold; color: #333; font-size: 1.1rem;">{{ announcement.title }}</div>
                </div>
                
                <div style="margin-bottom: 15px;">
                    <div style="color: #999; font-size: 0.9rem; margin-bottom: 5px;">å‘å¸ƒè€…</div>
                    <div style="color: #333;">
                        <a href="{% url 'clubs:user_detail' announcement.created_by.id %}" style="text-decoration: none; color: inherit; display: flex; align-items: center; gap: 4px;">
                            <div style="width: 20px; height: 20px; border-radius: 50%; overflow: hidden; flex-shrink: 0;">
                                {% if announcement.created_by.profile.avatar %}
                                    <img src="{{ announcement.created_by.profile.avatar.url }}" alt="{{ announcement.created_by.username }}" style="width: 100%; height: 100%; object-fit: cover;">
                                {% else %}
                                    <div style="width: 100%; height: 100%; background: var(--md3-primary-container); color: var(--md3-on-primary-container); display: flex; align-items: center; justify-content: center; font-weight: bold; font-size: 10px;">
                                        {{ announcement.created_by.profile.get_full_name|slice:":1"|default:announcement.created_by.username|slice:":1"|upper }}
                                    </div>
                                {% endif %}
                            </div>
                            <span>{{ announcement.created_by.profile.get_full_name|default:announcement.created_by.username }}</span>
                        </a>
                    </div>
                </div>
                
                <div style="margin-bottom: 15px;">
                    <div style="color: #999; font-size: 0.9rem; margin-bottom: 5px;">å‘å¸ƒæ—¶é—´</div>
                    <div style="color: #333;">{{ announcement.published_at|default:announcement.created_at }}</div>
                </div>
                
                <div>
                    <div style="color: #999; font-size: 0.9rem; margin-bottom: 5px;">çŠ¶æ€</div>
                    <div>
                        {% if announcement.status == 'published' %}
                            <span style="background: #d4edda; color: #155724; padding: 3px 8px; border-radius: 3px;">å·²å‘å¸ƒ</span>
                        {% elif announcement.status == 'draft' %}
                            <span style="background: #e9ecef; color: #6c757d; padding: 3px 8px; border-radius: 3px;">è‰ç¨¿</span>
                        {% else %}
                            <span style="background: #f8d7da; color: #721c24; padding: 3px 8px; border-radius: 3px;">å·²å½’æ¡£</span>
                        {% endif %}
                    </div>
                </div>
            </div>

            <form method="post" action="{% url 'clubs:delete_announcement' announcement.id %}" style="margin-bottom: 20px;">
                {% csrf_token %}
                <div style="display: flex; gap: 10px;">
                    <button type="submit" class="btn btn-danger" style="flex: 1; padding: 12px; background-color: #dc3545; color: white; border: none; border-radius: 4px; font-weight: bold; cursor: pointer; font-size: 1rem;">
                        ğŸ—‘ï¸ ç¡®è®¤åˆ é™¤
                    </button>
                    <a href="{% url 'clubs:admin_dashboard' %}" class="btn btn-secondary" style="flex: 1; padding: 12px; background-color: #6c757d; color: white; border: none; border-radius: 4px; font-weight: bold; cursor: pointer; font-size: 1rem; text-align: center; text-decoration: none; display: flex; align-items: center; justify-content: center;">
                        âœ• å–æ¶ˆ
                    </a>
                </div>
            </form>

            <div style="background: #e7f3ff; border-left: 4px solid #0066cc; padding: 15px; border-radius: 4px;">
                <p style="margin: 0; color: #0066cc;">
                    <strong>ğŸ’¡ æç¤º:</strong> å¦‚æœæ‚¨åªæ˜¯æƒ³éšè—æ­¤å…¬å‘Šï¼Œå¯ä»¥å°†å…¶çŠ¶æ€æ”¹ä¸º"å·²å½’æ¡£"è€Œä¸æ˜¯åˆ é™¤ã€‚
                </p>
            </div>
        </div>
    </div>
</div>

<style>
.btn {
    text-decoration: none;
    border-radius: 4px;
    font-weight: 600;
    transition: all 0.3s ease;
}

.btn-danger {
    background-color: #dc3545;
    color: white;
}

.btn-danger:hover {
    background-color: #c82333;
}

.btn-secondary {
    background-color: #6c757d;
    color: white;
}

.btn-secondary:hover {
    background-color: #5a6268;
}

.card {
    background: white;
    border: 1px solid #ddd;
    border-radius: 8px;
    box-shadow: 0 2px 4px rgba(0,0,0,0.1);
}

.card-header {
    padding: 15px 20px;
    background: #f5f5f5;
    border-bottom: 1px solid #ddd;
    border-radius: 8px 8px 0 0;
}

.card-header h2 {
    margin: 0;
    font-size: 22px;
    color: #333;
}

@media (max-width: 768px) {
    div {
        font-size: 0.95rem;
    }
    
    button, a {
        padding: 10px !important;
    }
}
</style>
{% endblock %}
